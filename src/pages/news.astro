---
import Layout from '../layouts/Layout.astro';

// Mock news articles data - this will be replaced with CMS data later
const newsArticles = [
    {
        id: "lorem-ipsum-consectetur-adipiscing",
        title: "Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing",
        excerpt: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.",
        content: "Full article content will be displayed on individual article pages...",
        author: "Club Admin",
        date: new Date("2024-12-15"),
        image: "https://placehold.co/800x400/981335/FFFFFF?text=Featured+Article",
        featured: true
    },
    {
        id: "pellentesque-habitant-morbi-tristique",
        title: "Pellentesque Habitant Morbi Tristique Senectus",
        excerpt: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet ante.",
        content: "Full article content will be displayed on individual article pages...",
        author: "Coach Smith",
        date: new Date("2024-11-28"),
        image: "https://placehold.co/800x400/c5a043/FFFFFF?text=News+Article",
        featured: false
    },
    {
        id: "mauris-blandit-aliquet-elit",
        title: "Mauris Blandit Aliquet Elit Eget Tincidunt",
        excerpt: "Mauris blandit aliquet elit, eget tincidunt nibh pulvinar a. Curabitur non nulla sit amet nisl tempus convallis quis ac lectus. Vestibulum ac diam sit amet quam vehicula elementum.",
        content: "Full article content will be displayed on individual article pages...",
        author: "Club President",
        date: new Date("2024-11-20"),
        image: "https://placehold.co/800x400/333333/FFFFFF?text=News+Update",
        featured: false
    },
    {
        id: "curabitur-arcu-erat-accumsan",
        title: "Curabitur Arcu Erat Accumsan Id Imperdiet",
        excerpt: "Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Vivamus magna justo, lacinia eget consectetur sed, convallis at tellus. Proin eget tortor risus.",
        content: "Full article content will be displayed on individual article pages...",
        author: "News Editor",
        date: new Date("2024-10-15"),
        image: "https://placehold.co/800x400/981335/FFFFFF?text=Club+News",
        featured: false
    }
];

// Sort articles by date (newest first)
const sortedArticles = newsArticles.sort((a, b) => b.date.getTime() - a.date.getTime());

// Format date for display
function formatDate(date: Date): string {
    return date.toLocaleDateString('en-AU', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    });
}
---

<Layout 
    title="News"
    description="Stay up to date with the latest news from Peninsula Dolphins Rugby League Club. Read about training updates, match results, new player registrations, and community events."
>
    <div class="container mx-auto px-6 py-16 md:py-24">
        <div class="max-w-4xl mx-auto text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-extrabold text-primary mb-4">Latest News</h1>
            <p class="text-lg text-zinc-600 leading-relaxed">Stay up to date with everything happening at the Peninsula Dolphins Rugby League Club</p>
        </div>

        <div class="max-w-6xl mx-auto">
            <!-- Featured Article -->
            {sortedArticles.filter(article => article.featured).map(article => (
                <div class="mb-16 bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="md:flex">
                        <div class="md:w-1/2">
                            <img src={article.image} alt={article.title} class="w-full h-64 md:h-full object-cover">
                        </div>
                        <div class="md:w-1/2 p-8">
                            <div class="flex items-center mb-4">
                                <span class="inline-block bg-primary text-white text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide">Featured</span>
                                <span class="ml-auto text-sm text-zinc-500">{formatDate(article.date)}</span>
                            </div>
                            <h2 class="text-2xl md:text-3xl font-bold text-zinc-800 mb-4">{article.title}</h2>
                            <p class="text-zinc-600 leading-relaxed mb-6">{article.excerpt}</p>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-zinc-500">By {article.author}</span>
                                <a href={`/news/${article.id}`} class="bg-primary text-white font-semibold py-2 px-6 rounded-lg hover:bg-primary-dark transition-colors duration-300">
                                    Read More
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            ))}

            <!-- Article Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {sortedArticles.filter(article => !article.featured).map(article => (
                    <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                        <img src={article.image} alt={article.title} class="w-full h-48 object-cover">
                        <div class="p-6">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-xs text-zinc-500">{formatDate(article.date)}</span>
                                <span class="text-xs text-zinc-500">By {article.author}</span>
                            </div>
                            <h3 class="text-xl font-bold text-zinc-800 mb-3 line-clamp-2">{article.title}</h3>
                            <p class="text-zinc-600 text-sm leading-relaxed mb-4 line-clamp-3">{article.excerpt}</p>
                            <a href={`/news/${article.id}`} class="inline-flex items-center text-primary font-semibold hover:text-primary-dark transition-colors duration-300">
                                Read More
                                <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>
                        </div>
                    </article>
                ))}
            </div>

            <!-- Newsletter Signup -->
            <div class="mt-16 bg-zinc-100 rounded-xl p-8 text-center">
                <h3 class="text-2xl font-bold text-zinc-800 mb-4">Stay in the Loop</h3>
                <p class="text-zinc-600 mb-6">Subscribe to our newsletter to get the latest news and updates delivered straight to your inbox.</p>
                <div class="max-w-md mx-auto flex gap-4">
                    <input type="email" placeholder="Enter your email" class="flex-1 px-4 py-3 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    <button class="bg-primary text-white font-semibold px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors duration-300">
                        Subscribe
                    </button>
                </div>
            </div>
        </div>
    </div>
</Layout>

<style>
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
</style>